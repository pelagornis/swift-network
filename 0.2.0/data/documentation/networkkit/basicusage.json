{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/networkkit\/basicusage"]}],"hierarchy":{"paths":[["doc:\/\/NetworkKit\/documentation\/NetworkKit"]]},"abstract":[{"type":"text","text":"Learn the fundamental concepts and patterns for using Swift Network effectively."}],"sections":[],"kind":"article","identifier":{"url":"doc:\/\/NetworkKit\/documentation\/NetworkKit\/BasicUsage","interfaceLanguage":"swift"},"schemaVersion":{"major":0,"minor":3,"patch":0},"metadata":{"roleHeading":"Article","title":"Basic Usage","modules":[{"name":"NetworkKit"}],"role":"article"},"primaryContentSections":[{"kind":"content","content":[{"level":2,"type":"heading","text":"Overview","anchor":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This guide covers the essential patterns and concepts you’ll use most often with Swift Network, including endpoint creation, request modifiers, and error handling."}]},{"level":2,"type":"heading","text":"Creating Endpoints","anchor":"Creating-Endpoints"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Endpoints define your API endpoints using the "},{"type":"codeVoice","code":"Endpoint"},{"type":"text","text":" protocol. Here are common patterns:"}]},{"level":3,"type":"heading","text":"Simple GET Request","anchor":"Simple-GET-Request"},{"syntax":"swift","type":"codeListing","code":["struct UserEndpoint: Endpoint {","    let baseURL = URL(string: \"https:\/\/api.example.com\")!","    let path = \"\/users\"","    let method = Http.Method.get","    let task = Http.Task.requestPlain","    let headers = [Http.Header.accept(\"application\/json\")]","    let timeout: TimeInterval? = 30","}"]},{"level":3,"type":"heading","text":"POST Request with JSON Body","anchor":"POST-Request-with-JSON-Body"},{"syntax":"swift","type":"codeListing","code":["struct CreateUserEndpoint: Endpoint {","    let baseURL = URL(string: \"https:\/\/api.example.com\")!","    let path = \"\/users\"","    let method = Http.Method.post","    let task: Http.Task","    let headers = [Http.Header.contentType(\"application\/json\")]","    let timeout: TimeInterval? = 30","    ","    init(user: CreateUserRequest) {","        self.task = Http.Task.requestJSON(user)","    }","}","","struct CreateUserRequest: Codable {","    let name: String","    let email: String","}"]},{"level":3,"type":"heading","text":"Parameterized Endpoint","anchor":"Parameterized-Endpoint"},{"syntax":"swift","type":"codeListing","code":["struct UserDetailEndpoint: Endpoint {","    let baseURL = URL(string: \"https:\/\/api.example.com\")!","    let path: String","    let method = Http.Method.get","    let task = Http.Task.requestPlain","    let headers = [Http.Header.accept(\"application\/json\")]","    let timeout: TimeInterval? = 30","    ","    init(userId: Int) {","        self.path = \"\/users\/\\(userId)\"","    }","}"]},{"level":2,"type":"heading","text":"Using Request Modifiers","anchor":"Using-Request-Modifiers"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Request modifiers allow you to dynamically modify requests:"}]},{"level":3,"type":"heading","text":"Adding Headers","anchor":"Adding-Headers"},{"syntax":"swift","type":"codeListing","code":["let authModifier = HeaderModifier(key: \"Authorization\", value: \"Bearer \\(token)\")","let customModifier = HeaderModifier(key: \"X-Custom\", value: \"value\")","","let users: [User] = try await provider.request(","    UserEndpoint(), ","    as: [User].self, ","    modifiers: [authModifier, customModifier]",")"]},{"level":3,"type":"heading","text":"Setting Timeout","anchor":"Setting-Timeout"},{"syntax":"swift","type":"codeListing","code":["let timeoutModifier = TimeoutModifier(timeout: 60)","","let users: [User] = try await provider.request(","    UserEndpoint(), ","    as: [User].self, ","    modifiers: [timeoutModifier]",")"]},{"level":3,"type":"heading","text":"Multiple Modifiers","anchor":"Multiple-Modifiers"},{"syntax":"swift","type":"codeListing","code":["let modifiers: [RequestModifier] = [","    HeaderModifier(key: \"Authorization\", value: \"Bearer \\(token)\"),","    TimeoutModifier(timeout: 60),","    CachePolicyModifier(policy: .reloadIgnoringLocalCacheData)","]","","let users: [User] = try await provider.request(","    UserEndpoint(), ","    as: [User].self, ","    modifiers: modifiers",")"]},{"level":2,"type":"heading","text":"Error Handling","anchor":"Error-Handling"},{"type":"paragraph","inlineContent":[{"text":"Swift Network provides comprehensive error handling:","type":"text"}]},{"level":3,"type":"heading","text":"Basic Error Handling","anchor":"Basic-Error-Handling"},{"syntax":"swift","type":"codeListing","code":["do {","    let users: [User] = try await provider.request(UserEndpoint(), as: [User].self)","    \/\/ Handle success","} catch {","    \/\/ Handle error","    print(\"Request failed: \\(error)\")","}"]},{"level":3,"type":"heading","text":"Specific Error Types","anchor":"Specific-Error-Types"},{"syntax":"swift","type":"codeListing","code":["do {","    let users: [User] = try await provider.request(UserEndpoint(), as: [User].self)","} catch NetworkError.serverError(let statusCode, let data) {","    print(\"Server error: \\(statusCode)\")","    \/\/ Handle server error","} catch NetworkError.requestFailed(let urlError) {","    print(\"Network error: \\(urlError.localizedDescription)\")","    \/\/ Handle network error","} catch NetworkError.decodingError(let error) {","    print(\"Decoding error: \\(error)\")","    \/\/ Handle decoding error","} catch {","    print(\"Unexpected error: \\(error)\")","}"]},{"level":2,"type":"heading","text":"Using Plugins","anchor":"Using-Plugins"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Plugins extend the functionality of your network requests:"}]},{"level":3,"type":"heading","text":"Logging Plugin","anchor":"Logging-Plugin"},{"syntax":"swift","type":"codeListing","code":["let loggingPlugin = LoggingPlugin(logger: ConsoleLogger(level: .info))","let provider = NetworkProvider<UserEndpoint>(plugins: [loggingPlugin])","","\/\/ All requests will now be logged","let users: [User] = try await provider.request(UserEndpoint(), as: [User].self)"]},{"level":3,"type":"heading","text":"Custom Plugin","anchor":"Custom-Plugin"},{"type":"codeListing","code":["class AuthenticationPlugin: NetworkPlugin {","    func willSend(_ request: URLRequest, target: Endpoint) {","        \/\/ Add authentication headers","        var modifiedRequest = request","        modifiedRequest.setValue(\"Bearer \\(getToken())\", forHTTPHeaderField: \"Authorization\")","    }","    ","    func didReceive(_ result: Result<(Data, URLResponse), Error>, target: Endpoint) {","        \/\/ Handle authentication errors","        if case .failure(let error) = result {","            \/\/ Handle token refresh, etc.","        }","    }","    ","    private func getToken() -> String {","        \/\/ Return current authentication token","        return \"your-token\"","    }","}","","let authPlugin = AuthenticationPlugin()","let provider = NetworkProvider<UserEndpoint>(plugins: [authPlugin])"],"syntax":"swift"},{"type":"heading","level":2,"text":"Best Practices","anchor":"Best-Practices"},{"type":"heading","level":3,"text":"1. Reuse Network Providers","anchor":"1-Reuse-Network-Providers"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create network providers once and reuse them:"}]},{"type":"codeListing","code":["class NetworkService {","    private let provider: NetworkProvider<UserEndpoint>","    ","    init() {","        self.provider = NetworkProvider<UserEndpoint>(","            plugins: [LoggingPlugin(logger: ConsoleLogger(level: .info))]","        )","    }","    ","    func fetchUsers() async throws -> [User] {","        return try await provider.request(UserEndpoint(), as: [User].self)","    }","}"],"syntax":"swift"},{"type":"heading","level":3,"text":"2. Use Type-Safe Endpoints","anchor":"2-Use-Type-Safe-Endpoints"},{"type":"paragraph","inlineContent":[{"text":"Leverage Swift’s type system for better safety:","type":"text"}]},{"type":"codeListing","code":["\/\/ Good: Type-safe endpoint","struct UserEndpoint: Endpoint {","    let baseURL = URL(string: \"https:\/\/api.example.com\")!","    let path = \"\/users\"","    \/\/ ... other properties","}","","\/\/ Avoid: String-based URLs","let url = \"https:\/\/api.example.com\/users\" \/\/ Less type-safe"],"syntax":"swift"},{"type":"heading","level":3,"text":"3. Handle Errors Appropriately","anchor":"3-Handle-Errors-Appropriately"},{"type":"paragraph","inlineContent":[{"text":"Provide meaningful error handling:","type":"text"}]},{"type":"codeListing","code":["enum NetworkServiceError: Error {","    case invalidResponse","    case serverError(Int)","    case networkError(Error)","}","","func fetchUsers() async throws -> [User] {","    do {","        return try await provider.request(UserEndpoint(), as: [User].self)","    } catch NetworkError.serverError(let statusCode, _) {","        throw NetworkServiceError.serverError(statusCode)","    } catch {","        throw NetworkServiceError.networkError(error)","    }","}"],"syntax":"swift"},{"type":"heading","level":2,"text":"Next Steps","anchor":"Next-Steps"},{"type":"paragraph","inlineContent":[{"text":"Now that you understand the basics, explore these advanced topics:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"doc:Endpoints"},{"type":"text","text":" - Learn more about endpoint patterns"}]}]},{"content":[{"inlineContent":[{"text":"doc:RequestModifiers","type":"text"},{"text":" - Discover all available modifiers","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"doc:Plugins"},{"type":"text","text":" - Create custom plugins"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"doc:EnterpriseFeatures"},{"type":"text","text":" - Use enterprise-grade features"}]}]}]}]}],"references":{"doc://NetworkKit/documentation/NetworkKit":{"role":"collection","identifier":"doc:\/\/NetworkKit\/documentation\/NetworkKit","type":"topic","kind":"symbol","title":"NetworkKit","abstract":[],"url":"\/documentation\/networkkit"}}}